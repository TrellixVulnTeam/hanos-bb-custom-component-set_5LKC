"use strict";
/* eslint-disable camelcase */
/* eslint-disable @typescript-eslint/camelcase */
/* npm dependencies */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs_extra_1 = __importDefault(require("fs-extra"));
const path_1 = __importDefault(require("path"));
const commander_1 = __importDefault(require("commander"));
/* internal dependencies */
const publishAppFunctions_1 = __importDefault(require("./functions/publishAppFunctions"));
const publishCustomFunctions_1 = __importDefault(require("./functions/publishCustomFunctions"));
/* process arguments */
commander_1.default
    .name('bb functions publish')
    .option('-b, --bump', 'Bump the revision number.')
    .option('-s, --skip', 'Skip building the custom functions bundle.')
    .option('-h, --host <host>', 'Set hostname to publish to. Defaults to <identifier>.bettyblocks.com')
    .parse(process.argv);
const bumpRevision = commander_1.default.bump;
const skipBuild = commander_1.default.skip;
const { host } = commander_1.default;
/* execute command */
const workingDir = process.cwd();
if (fs_extra_1.default.existsSync(path_1.default.join(workingDir, '.app-functions'))) {
    publishAppFunctions_1.default();
}
else {
    publishCustomFunctions_1.default(host, bumpRevision, skipBuild);
}
//# sourceMappingURL=bb-functions-publish.js.map